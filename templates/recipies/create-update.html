{% extends "base-recipe.html" %}
{% block content %}

<style>
    .ingredients-form {
        border-bottom: 1px solid green;
    }
</style>
{% if message %}
<p>{{ message }}</p>
{% endif %}

<div style="margin-top:30px;">
    <form action="." method="POST">
        <h3>Create Recipe</h3>
        {% csrf_token %}
        <!-- {{ form.as_p }} -->
        <!-- Another quick way to dynamically add class to all fields -->
        {% for field in form %}
            <!-- insted to manuall add class we can add it from form -->
            <!-- <div class="{% if field.field.required%}required-class{% endif %}"> -->
            <div class="{% if field.field.required%}{{ form.required_css_class }}{% endif %}">
            {{ field.errors }}
            {{ field.label_tag }}{{ field }}
            {% if field.help_text %}
            <p class="help">{{ field.help_text|safe }}</p>
            {% endif %}
            </div>
        {% endfor %}

        {% if formset %}
        <h3>Ingredient:</h3>
        <!-- {{ formset.as_p }} -->
        {{ formset.management_form }}
        {% for form in formset %}
            <div class="ingredients-form">
                {{ form.as_p }}
            </div>
        {% endfor %}

        {% endif %}
        <div><button type='submit'>Save</button></div>
    </form>
</div>



{% endblock content %}